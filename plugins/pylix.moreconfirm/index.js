var plugin=(()=>{var b=Object.create;var i=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var s=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),P=(r,t)=>{for(var a in t)i(r,a,{get:t[a],enumerable:!0})},f=(r,t,a,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(var n=S(t),e=0,c=n.length,o;e<c;e++)o=n[e],!A.call(r,o)&&o!==a&&i(r,o,{get:(w=>t[w]).bind(null,o),enumerable:!(l=x(t,o))||l.enumerable});return r};var m=(r,t,a)=>(a=r!=null?b($(r)):{},f(t||!r||!r.__esModule?i(a,"default",{value:r,enumerable:!0}):a,r)),T=r=>f(i({},"__esModule",{value:!0}),r);var d=s((j,p)=>{p.exports=bunny.api});var h=s((k,y)=>{y.exports=bunny.metro});var Y={};P(Y,{default:()=>V});var v=m(d()),u=m(h()),g,{createStorage:B,logger:F}=bunny.plugin,C=B();(g=C).confirmCalls??(g.confirmCalls=!0);var M=(0,u.findByProps)("handleStartCall"),R=(0,u.findByProps)("show","confirm","close"),V=definePlugin({start(){v.patcher.instead("handleStartCall",M,function(r,t){if(!C.confirmCalls)return t(...r);var[{rawRecipients:[{username:a},l]},n]=r,e=n?"video call":"call";R.show({title:l?`Start a group ${e}?`:`Start a ${e} with ${a}?`,body:l?"Are you sure you want to start the group call?":`Are you sure you want to **${e} with ${a}**?`,confirmText:"Yes",cancelText:"Cancel",confirmColor:"brand",onConfirm:function(){try{t(...r)}catch(c){F.error("Failed to start call",c)}}})})}});return T(Y);})();
