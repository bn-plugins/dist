var plugin=(()=>{var $=Object.create;var i=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var u=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),F=(r,t)=>{for(var a in t)i(r,a,{get:t[a],enumerable:!0})},d=(r,t,a,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(var n=P(t),o=0,s=n.length,e;o<s;o++)e=n[o],!B.call(r,e)&&e!==a&&i(r,e,{get:(S=>t[S]).bind(null,e),enumerable:!(l=A(t,e))||l.enumerable});return r};var f=(r,t,a)=>(a=r!=null?$(T(r)):{},d(t||!r||!r.__esModule?i(a,"default",{value:r,enumerable:!0}):a,r)),M=r=>d(i({},"__esModule",{value:!0}),r);var h=u((k,y)=>{y.exports=bunny.api});var C=u((q,g)=>{g.exports=bunny.metro});var w=u((z,v)=>{v.exports=bunny.plugin});var _={};F(_,{default:()=>Y,storage:()=>p});var b=f(h()),m=f(C()),c=f(w()),x,p=(0,c.createStorage)();(x=p).confirmCalls??(x.confirmCalls=!0);var R=(0,m.findByProps)("handleStartCall"),V=(0,m.findByProps)("show","confirm","close"),Y=definePlugin({start(){b.patcher.instead("handleStartCall",R,function(r,t){if(!p.confirmCalls)return t(...r);var[{rawRecipients:[{username:a},l]},n]=r,o=n?"video call":"call";V.show({title:l?`Start a group ${o}?`:`Start a ${o} with ${a}?`,body:l?"Are you sure you want to start the group call?":`Are you sure you want to **${o} with ${a}**?`,confirmText:"Yes",cancelText:"Cancel",confirmColor:"brand",onConfirm:function(){try{t(...r)}catch(s){c.logger.error("Failed to start call",s)}}})})}});return M(_);})();
